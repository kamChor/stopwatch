<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Minimal Stopwatch</title>
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --muted:#8b93a7;
      --accent:#111827;
      --accent-2:#0ea5a4;
      --glass: rgba(16,24,40,0.03);
      --shadow: 0 6px 20px rgba(16,24,40,0.06);
      --radius:14px;
      --pad:20px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Segoe UI Mono", monospace;
      --ui: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    /* Page */
    html,body{height:100%;margin:0;}
    body{
      font-family:var(--ui);
      background:linear-gradient(180deg,var(--bg),#eef1f8 60%);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
      color:var(--accent);
    }

    /* Card */
    .card{
      width:min(460px,96vw);
      background:var(--card);
      border-radius:var(--radius);
      padding:calc(var(--pad) * 1.2);
      box-shadow:var(--shadow);
      display:flex;
      flex-direction:column;
      gap:18px;
      align-items:center;
      border: 1px solid var(--glass);
    }

    /* Header */
    .meta{
      width:100%;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .title{font-weight:600; font-size:0.95rem; color:#0f1724;}
    .sub{font-size:0.78rem; color:var(--muted);}

    /* Time display */
    .display{
      width:100%;
      background:linear-gradient(180deg,#fff,#fbfdff);
      border-radius:12px;
      padding:18px 20px;
      text-align:center;
      box-shadow: 0 4px 14px rgba(2,6,23,0.04) inset;
    }
    .time{
      font-family:var(--mono);
      font-size:2.6rem;
      letter-spacing:0.02em;
      margin:0;
      color:var(--accent);
      line-height:1;
    }
    .small{
      font-size:0.81rem;
      color:var(--muted);
      margin-top:6px;
    }

    /* Controls */
    .controls{
      width:100%;
      display:flex;
      gap:10px;
      justify-content:center;
    }
    .btn{
      appearance:none;
      border:0;
      background:transparent;
      padding:10px;
      border-radius:10px;
      cursor:pointer;
      display:inline-grid;
      place-items:center;
      transition: all 150ms ease;
      min-width:48px;
      min-height:48px;
    }
    .btn:focus{outline:2px solid rgba(14,165,164,0.14); outline-offset:3px;}
    .btn--primary{
      background:linear-gradient(90deg,var(--accent-2),#06b6d4);
      color:#fff;
      box-shadow: 0 6px 18px rgba(6,95,95,0.08);
    }
    .btn--muted{
      background:transparent;
      color:var(--accent);
      border:1px solid rgba(15,23,36,0.06);
    }
    .btn[disabled]{opacity:0.45; cursor:default; transform:none;}

    /* Laps */
    .laps{
      width:100%;
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-top:6px;
    }
    .lap{
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:var(--glass);
      padding:10px 12px;
      border-radius:10px;
      font-size:0.88rem;
      color:var(--accent);
    }
    .lap .index{color:var(--muted); font-size:0.82rem;}
    .no-laps{font-size:0.86rem; color:var(--muted); text-align:center; padding:8px 0;}

    /* Icons (simple) */
    svg{width:18px;height:18px;display:block;}

    /* Responsive tweaks */
    @media (max-width:380px){
      .time{font-size:2.1rem;}
      .card{padding:16px;}
      .btn{min-width:44px; min-height:44px;}
    }
  </style>
</head>
<body>
  <main class="card" role="application" aria-label="Minimal stopwatch">
    <div class="meta">
      <div>
        <div class="title">Stopwatch</div>
        <div class="sub">Clean • Minimal • Accessible</div>
      </div>
      <div class="sub" id="status" aria-live="polite">Ready</div>
    </div>

    <div class="display" role="timer" aria-atomic="true" aria-live="off">
      <div id="time" class="time">00:00:00.00</div>
      <div class="small">HH:MM:SS.ms</div>
    </div>

    <div class="controls" role="group" aria-label="Stopwatch controls">
      <button id="start" class="btn btn--primary" title="Start" aria-pressed="false">
        <!-- Play icon -->
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 4.5v15l13-7.5L6 4.5z" fill="currentColor"/>
        </svg>
      </button>

      <button id="pause" class="btn btn--muted" title="Pause" disabled>
        <!-- Pause icon -->
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 5h4v14H6zM14 5h4v14h-4z" fill="currentColor"/>
        </svg>
      </button>

      <button id="lap" class="btn btn--muted" title="Lap" disabled>
        <!-- Flag / lap icon -->
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 3v18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M6 7c3-1.6 6-1.6 9 0v8c-3-1.6-6-1.6-9 0" fill="currentColor"/>
        </svg>
      </button>

      <button id="reset" class="btn btn--muted" title="Reset" disabled>
        <!-- Reset icon -->
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 12a9 9 0 1 1-2.6-6.2L21 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M21 3v4h-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <div class="laps" id="laps" aria-live="polite">
      <div class="no-laps" id="noLaps">No laps yet</div>
    </div>
  </main>

  <script>
    // State
    let startAt = 0;       // timestamp when started/resumed
    let elapsed = 0;       // ms elapsed when paused
    let timer = null;
    let running = false;

    // Elements
    const elTime = document.getElementById('time');
    const btnStart = document.getElementById('start');
    const btnPause = document.getElementById('pause');
    const btnReset = document.getElementById('reset');
    const btnLap = document.getElementById('lap');
    const lapsEl = document.getElementById('laps');
    const noLaps = document.getElementById('noLaps');
    const statusEl = document.getElementById('status');

    // Formatting helper: ms -> HH:MM:SS.ms (two-digit hundredths)
    function format(ms){
      const totalHundredths = Math.floor(ms / 10);
      const hh = Math.floor(totalHundredths / 360000);
      const mm = Math.floor((totalHundredths % 360000) / 6000);
      const ss = Math.floor((totalHundredths % 6000) / 100);
      const cc = totalHundredths % 100;

      const sHH = String(hh).padStart(2,'0');
      const sMM = String(mm).padStart(2,'0');
      const sSS = String(ss).padStart(2,'0');
      const sCC = String(cc).padStart(2,'0');

      return `${sHH}:${sMM}:${sSS}.${sCC}`;
    }

    // Render display
    function render(){
      const ms = running ? (Date.now() - startAt + elapsed) : elapsed;
      elTime.textContent = format(ms);
    }

    // Tick at 60fps-ish but update displayed hundredths properly
    function startTimer(){
      if (timer) cancelAnimationFrame(timer);
      function tick(){
        render();
        timer = requestAnimationFrame(tick);
      }
      timer = requestAnimationFrame(tick);
    }

    function stopTimer(){
      if (timer) cancelAnimationFrame(timer);
      timer = null;
    }

    // Controls
    btnStart.addEventListener('click', () => {
      if (!running){
        running = true;
        startAt = Date.now();
        startTimer();
        btnStart.setAttribute('aria-pressed','true');
        btnStart.classList.add('btn--primary');
        btnPause.disabled = false;
        btnReset.disabled = false;
        btnLap.disabled = false;
        statusEl.textContent = 'Running';
      }
    });

    btnPause.addEventListener('click', () => {
      if (running){
        running = false;
        elapsed = Date.now() - startAt + elapsed;
        stopTimer();
        btnStart.setAttribute('aria-pressed','false');
        btnStart.classList.remove('btn--primary');
        btnPause.disabled = true;
        statusEl.textContent = 'Paused';
      }
    });

    btnReset.addEventListener('click', () => {
      running = false;
      startAt = 0;
      elapsed = 0;
      stopTimer();
      render();
      // reset UI
      btnPause.disabled = true;
      btnReset.disabled = true;
      btnLap.disabled = true;
      // clear laps
      lapsEl.innerHTML = '';
      lapsEl.appendChild(noLaps);
      statusEl.textContent = 'Ready';
    });

    btnLap.addEventListener('click', () => {
      const current = running ? (Date.now() - startAt + elapsed) : elapsed;
      const lapText = format(current);
      addLap(lapText);
    });

    // Add lap (most recent on top)
    function addLap(text){
      // remove "no laps" placeholder if present
      if (noLaps && noLaps.parentNode) noLaps.remove();

      const rows = lapsEl.querySelectorAll('.lap');
      const idx = rows.length + 1;
      const item = document.createElement('div');
      item.className = 'lap';
      item.innerHTML = `<div class="index">Lap ${idx}</div><div class="timeVal">${text}</div>`;
      // prepend
      lapsEl.insertBefore(item, lapsEl.firstChild);
    }

    // keyboard shortcuts: Space = start/pause, r = reset, l = lap
    window.addEventListener('keydown', (e) => {
      if (e.target && ['INPUT','TEXTAREA'].includes(e.target.tagName)) return;
      if (e.code === 'Space'){ e.preventDefault(); running ? btnPause.click() : btnStart.click(); }
      if (e.key.toLowerCase() === 'r') btnReset.click();
      if (e.key.toLowerCase() === 'l') btnLap.click();
    });

    // initial render
    render();
  </script>
</body>
</html>
